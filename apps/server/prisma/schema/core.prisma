model Project {
    id     String @id @default(uuid(7)) @map("_id")
    user   User   @relation(fields: [userId], references: [id])
    userId String
    name   String
    domain String @unique

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    images GeneratedImage[]

    @@map("project")
}

model Template {
    id         String @id @default(uuid(7)) @map("_id")
    name       String
    data       Json // dynamic fields for template
    previewUrl String

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    images GeneratedImage[]

    @@map("template")
}

model GeneratedImage {
    id         String    @id @default(uuid(7)) @map("_id")
    project    Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
    projectId  String
    urlPath    String    @unique // "/blog/post-1" â†’ ties image to a page
    data       Json? // dynamic fields for template
    imageUrl   String
    template   Template? @relation(fields: [templateId], references: [id], onDelete: SetNull)
    templateId String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("image")
}
